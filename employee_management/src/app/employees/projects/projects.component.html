<div class="bg-project">
  <div class="container mt-5">
    <div class="row">
      <div class="col-6">
        <h2 class="text-center mb-4">Task Directory</h2>
      </div>
      <div class="col-6 text-end">
        <button class="btn-add btn-success" (click)="resetForm(); isformVisible = true; isEditMode = false;">Add Project</button>
      </div>
    </div>

    <!-- Add/Edit Project Form -->
    <div *ngIf="isformVisible">
      <form class="mb-4" (ngSubmit)="isEditMode ? saveChanges() : addProject()">
        <div class="mb-3">
          <label for="name" class="form-label">Project Name</label>
          <input
            type="text"
            id="name"
            class="form-control"
            [(ngModel)]="ProjectClass.project_name"
            name="name"
            required
            placeholder="Enter Project Name"
          />
        </div>

        <div class="mb-3">
          <label for="id" class="form-label">Employee ID</label>
          <input
            type="text"
            id="id"
            class="form-control"
            [(ngModel)]="ProjectClass.employee_id"
            name="employee_id"
            required
            placeholder="Enter your Employee ID"
          />
        </div>

        <div class="mb-3">
          <label for="startDate" class="form-label">Start Date</label>
          <input
            type="date"
            id="startDate"
            class="form-control"
            [(ngModel)]="ProjectClass.startDate"
            name="startDate"
            required
          />
        </div>
        <div class="mb-3">
          <label for="endDate" class="form-label">End Date</label>
          <input
            type="date"
            id="endDate"
            class="form-control"
            [(ngModel)]="ProjectClass.endDate"
            name="endDate"
            required
          />
        </div>

        <div class="mb-3">
          <label for="status" class="form-label">Status</label>
          <input
            type="text"
            id="status"
            class="form-control"
            [(ngModel)]="ProjectClass.status"
            name="status"
            required
            placeholder="Enter Status"
          />
        </div>

        <div class="mb-3">
          <label for="Role" class="form-label">Role</label>
          <select id="Role" class="form-select" [(ngModel)]="ProjectClass.role" name="role" required>
            <option value="">Select Role</option>
            <option *ngFor="let role of roles" [value]="role">{{ role }}</option>
          </select>
        </div>

        <button type="submit" class="btn btn-success mt-3">
          {{ isEditMode ? 'Update Project' : 'Add Project' }}
        </button>
        <button
          type="button"
          class="btn btn-secondary mt-3"
          (click)="resetForm(); isformVisible = false;"
        >
          Close
        </button>
      </form>
    </div>

    <!-- Project List -->
    <div class="container mt-4">
      <h3 class="text-center mb-4">Project List</h3>
      <table class="table table-striped table-bordered">
        <thead class="table-dark">
          <tr>
            <th>Project ID</th>
            <th>Project Name</th>
            <th>Employee ID</th>
            <th>Name</th>
            <th>Role</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let project of projectArry">
            <td>{{ project.project_id }}</td>
            <td>{{ project.project_name }}</td>
            <td>{{ project.employee_id }}</td>
            <td>{{ project.name }}</td>
            <td>{{ project.role }}</td>
            <td>{{ project.startDate }}</td>
            <td>{{ project.endDate }}</td>
            <td>{{ project.status }}</td>
            <td>
              <button class="btn btn-dark" (click)="onUpdate(project)">Update</button>
              <button class="btn btn-danger" (click)="deleteProject(project.project_id)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
